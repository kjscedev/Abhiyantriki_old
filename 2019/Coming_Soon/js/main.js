$("img").bind("webkitAnimationEnd mozAnimationEnd animationend",function(){$(this).removeClass("hovered")}),$("img").hover(function(){$(this).addClass("hovered")}),$(".puzzle").click(function(){$(this).removeClass("animate")});var bigSize=["url('assets/puzzle/Car.png')","url('assets/puzzle/Laptop.png')","url('assets/puzzle/Pulley.png')","url('assets/puzzle/Robot Arm.png')","url('assets/puzzle/Satellite.png')","url('assets/puzzle/VR Headset.png')","url('assets/puzzle/Camcorder.png')","url('assets/puzzle/controller.png')"],rand=Math.floor(Math.random()*bigSize.length);function setbg(){$(".pie").css("background-image",bigSize[rand])}function startGame(){moves=0,window.moves=0;var e=new Array(14,2,10,6,12,13,9,7,15,8,5,11,4,1,3,16),n="";for(i=0;i<e.length;i++)i==e.length-1&&(n=" pointer"),$("#image").append('<div id="pos'+(i+1)+'" class="pie sq'+e[i]+n+'"></div>'),$(".pie").css("background-image",bigSize[rand]);$("#counter span").html("0"),$("#clock span").html("000"),window.index=0,window.obj=new Timer,window.obj.Interval=1e3,window.obj.Tick=timer_tick,window.obj.Start(),movePiece()}function movePiece(){$("#image div").on("click",function(){if(!$(this).hasClass("pointer")){var e=$(this).attr("id").replace("pos","");if(validMove($(".pointer").attr("id").replace("pos",""),e)){var i=$(this),n=$(".pointer"),a=i.attr("class"),s=n.attr("class");i.removeClass(a).addClass(s),n.removeClass(s).addClass(a),window.moves++,$("#counter span").html(window.moves),16==parseInt(e)&&isGameOver()}}})}function validMove(e,i){if(1==e)var n=new Array(2,5);else if(2==e)n=new Array(1,3,6);else if(3==e)n=new Array(2,4,7);else if(4==e)n=new Array(3,8);else if(5==e)n=new Array(1,6,9);else if(6==e)n=new Array(2,5,7,10);else if(7==e)n=new Array(3,6,8,11);else if(8==e)n=new Array(4,7,12);else if(9==e)n=new Array(5,10,13);else if(10==e)n=new Array(6,9,11,14);else if(11==e)n=new Array(7,10,12,15);else if(12==e)n=new Array(8,11,16);else if(13==e)n=new Array(9,14);else if(14==e)n=new Array(10,13,15);else if(15==e)n=new Array(11,14,16);else if(16==e)n=new Array(12,15);if($.inArray(parseInt(i),n)>-1)return!0}function congrats(){$("#congo").show()}function isGameOver(){for(i=1;i<=16&&$("#image #pos"+i).hasClass("sq"+i);i++)16==i&&($("#pos16").removeClass("pointer"),$("#image div").off("click"),window.obj.Stop(),congrats())}$(document).ready(function(){$("#image").css("background-image",bigSize[rand])}),$(function(){$("#start").on("click",function(){$(this).hide(),$(".opacity").removeClass("opacity"),$("#counter, #clock , #replay , #seconds").show(),setbg(),startGame()})}),$(function(){$("#replay").on("click",function(){$("#start").show(),$("#congo").hide(),$("#image").addClass("opacity"),$("#counter, #clock , #replay , #seconds").hide(),window.obj.Stop()})});var Timer=function(){this.Interval=1e3,this.Enable=new Boolean(!1),this.Tick;var e;this.Start=function(){this.Enable=new Boolean(!0),(e=this).Enable&&(e.timerId=setInterval(function(){e.Tick()},e.Interval))},this.Stop=function(){e.Enable=new Boolean(!1),clearInterval(e.timerId)}};function timer_tick(){window.index=window.index+1,$("#clock span").html(secondsTimeSpanToHMS(window.index))}function secondsTimeSpanToHMS(e){var i=e;return e-=3600*Math.floor(e/3600),e-=60*Math.floor(e/60),i<100?i<10?"00"+i:"0"+i:i}
